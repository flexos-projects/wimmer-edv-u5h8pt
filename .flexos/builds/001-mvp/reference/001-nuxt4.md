---
id: build-ref-nuxt4
title: "Nuxt 4 Reference"
description: "Key APIs, patterns, and gotchas for Nuxt 4 development"
type: build
subtype: reference
status: draft
sequence: 1
tags: [build, reference, nuxt]
relatesTo: [builds/001-mvp/config.md]
createdAt: ""
updatedAt: ""
---

# Nuxt 4 Reference

Quick reference for the build agent. Key patterns, APIs, and common pitfalls.

## Project Structure

```
app/
├── pages/           # File-based routing (app/pages/index.vue → /)
├── components/      # Auto-imported components
├── composables/     # Auto-imported composables (useX)
├── layouts/         # Page layouts (default.vue)
├── middleware/      # Route middleware
├── plugins/         # App plugins
└── assets/          # Processed assets (CSS, images)

server/
├── api/             # Server routes (server/api/users.get.ts → GET /api/users)
├── middleware/      # Server middleware
└── utils/           # Server utilities (auto-imported)
```

## Key APIs

- **`definePageMeta()`** — Set page layout, middleware, auth requirements
- **`useFetch()` / `useAsyncData()`** — Data fetching with SSR support
- **`useState()`** — SSR-safe shared state
- **`defineEventHandler()`** — Server route handler
- **`navigateTo()`** — Programmatic navigation
- **`useRuntimeConfig()`** — Environment variables (public + private)

## Common Patterns

### Protected Route

```typescript
// app/middleware/auth.ts
export default defineNuxtRouteMiddleware((to) => {
  const user = useCurrentUser()
  if (!user.value && to.meta.auth !== false) {
    return navigateTo('/login')
  }
})
```

### Server Route with Validation

```typescript
// server/api/items.post.ts
export default defineEventHandler(async (event) => {
  const body = await readBody(event)
  // validate + process
  return { success: true }
})
```

## Gotchas

- `app/` directory is the app root in Nuxt 4 (not project root)
- Server utils in `server/utils/` are auto-imported in server context only
- `useRuntimeConfig().public` for client-accessible env vars
- `useFetch` deduplicates by default — use `key` param if calling same endpoint with different params
